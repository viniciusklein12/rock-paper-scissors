<!DOCTYPE html>
<html>
<head>
    <title>Rock, paper, scissors</title>
</head>
<body>
    <div>
        <button class="start">Start Game</button>
    </div>
    <div>
        <p>Computer selection:</p>
        <p class="computer-selection"></p>
    </div>
    <div>
        <button class="rock">Rock</button>
        <button class="paper">Paper</button>
        <button class="scissors">Scissors</button>
    </div>
    <div>
        <p>Player</p>
        <p class="player-result"></p>
        <p>Computer</p>
        <P class="computer-result"></P>
    </div>
</body>
<script>
    const computerSelectionDisplay = document.querySelector('.computer-selection');
    const startGameButton = document.querySelector('.start');
    const rockButton = document.querySelector('.rock');
    const paperButton = document.querySelector('.paper');
    const scissorsButton = document.querySelector('.scissors')
    const playerResult = document.querySelector('.player-result')
    const computerResult = document.querySelector('.computer-result')

    const computerPlay = () => {
        let rng = Math.random()
        if (rng <= 1/3){
            return 'Rock'
        }
        else if (rng > 1/3 && rng <= 2/3 ){
            return 'Paper'
        } else {
            return 'Scissors'
        }
    }

    const playRound = (playerSelection, computerSelection) => {
        let playerSelectionLowercase = playerSelection.toLowerCase();
        let computerSelectionLowercase = computerSelection.toLowerCase();
        let result = {player: 0, computer: 0};

        if (playerSelectionLowercase == computerSelectionLowercase) {
            return result
        }
        else if (
            playerSelectionLowercase == 'rock' && computerSelectionLowercase == 'paper' ||
            playerSelectionLowercase == 'paper' && computerSelectionLowercase == 'scissors' ||
            playerSelectionLowercase == 'scissors' && computerSelectionLowercase == 'rock'
        ){
            result.computer = 1
            return result
        }
        else if (
            playerSelectionLowercase == 'rock' && computerSelectionLowercase == 'scissors' ||
            playerSelectionLowercase == 'paper' && computerSelectionLowercase == 'rock' ||
            playerSelectionLowercase == 'scissors' && computerSelectionLowercase == 'paper'
            ){
            result.player = 1
            return result
        }
        }

    const gameRound = (playerSelection, computerSelection) => {
        let roundResult;
        roundResult = playRound(playerSelection, computerSelection);
        playerResult.textContent = parseInt(playerResult.textContent) + roundResult.player;
        computerResult.textContent = parseInt(computerResult.textContent) + roundResult.computer;
        if (parseInt(playerResult.textContent) + parseInt(computerResult.textContent) == 5){
            console.log('finish');
            return
    }
    }

    const game = (computerSelection) => {
        let roundResult;

        rockButton.onclick = () => {
            gameRound('rock', computerSelection);
            computerSelection = computerPlay();
            computerSelectionDisplay.textContent = computerSelection;
        }
        paperButton.onclick = () => {
            gameRound('paper', computerSelection);
            computerSelection = computerPlay();
            computerSelectionDisplay.textContent = computerSelection;
        }
        scissorsButton.onclick = () => {
            gameRound('scissors', computerSelection);
            computerSelection = computerPlay();
            computerSelectionDisplay.textContent = computerSelection;
        }
    }

    startGameButton.onclick = () => {
        let computerSelection = computerPlay();
        computerSelectionDisplay.textContent = computerSelection;
        playerResult.textContent = 0;
        computerResult.textContent = 0;
        game(computerSelection);
}

</script>

</html>